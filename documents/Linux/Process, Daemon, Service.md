# Process, Daemon, Service

> linux의 프로세스, 데몬, 서비스의 개념에 대하여 설명한다.

<br>

## 프로세스

프로세스는 '하드디스크에 저장된 실행 코드(프로그램)가 메모리에 로딩되어 활성화된 것' 이라고 설명 할 수 있다.

<br>

### 개념 및 용어

#### 포그라운드 프로세스

Foreground Process 는 실행하면 화면에 나타나서 사용자와 상호작용을 하는 프로세스를 말한다. 화면에서 실행되는 것이 보이는 프로세스라고 생각하면 된다.

#### 백그라운드 프로세스

Background Process 는 실행은 되었지만, 화면에는 나타나지 않고 뒤에서 실행되는 프로세스를 말한다. 예를 들어 바이러스 백신, 서버 데몬 등은 눈에는 보이지 않지만 실행되는 것이다.

#### 프로세스 번호

메모리에 로딩되어 활성화된 프로세스를 구분하려면 각각의 고유 번호가 필요하다. 이렇게 각각의 프로세스에 할당된 고유 번호를 프로세스 번호라고 부른다. 이 프로세스 번호를 이용하여 메모리에 활성화 된 프로세스를 강제로 제거 할 수도 있다.

#### 작업 번호

현재 실행되는 백그라운드 프로세스의 순차 번호를 의미한다.

<br>

### 주요 명령어

#### ps

현재 프로세스의 상태를 확인하는 명령어로, 프로세스의 번호 및 상태를 확인할 때는 `ps -ef | grep 프로세스이름` 명령을 사용 할 수 있다.

#### kill

프로세스를 강제로 종료하는 명령어로, `-9` 옵션과 함께 사용하면 무조건 프로세스가 종료된다. 무한 루프를 도는 프로세스를 종료하는데 사용 할 수 있다.

#### pstree

부모 프로세스와 자식 프로세스의 관계를 트리 형태로 보여준다.

<br>

<br>

## 서버 프로세스

<br>

### 서비스(=Daemon)

데몬`deamon` 이라고도 부르는 서비스`service` 는 서버 프로세스를 말한다. 즉, 서비스는 웹 서버, dns 서버, 메일 서버, DB 서버 등의 프로세스를 지칭한다. 또한 서비스는 평상시에도 늘 가동하는 서버 프로세스이다.

<br>

#### 서비스의 특징

* 시스템과 독자적으로 구동되어 제공되는 프로세스를 말한다. 예로 웹 서버, DB 서버, FTP 서버 등이 있다.
* 실행 및 종료는 대개 `systemctl start/stop/restart 서비스이름` 명령으로 사용된다.
* 서비스의 실행 스크립트 파일은 `/lib/systemd/system/디렉터리에 '서비스이름.service'` 라는 이름으로 확인 할 수 있다.

<br>

### 소켓

소켓`socket` 은 필요할 때만 작동하는 서버 프로세스를 말한다.

<br>

#### 소켓의 특징

* 서비스는 항상 기동되지만, 소켓은 외부에서 특정 서비스를 요청할 경우에 systemd가 구동시킨다. 그리고 요청이 끝나면 소켓도 종료된다.
* 따라서 소켓으로 설정된 서비스를 요청할 때는 처음 연결되는 시간이 서비스와 비교했을 때 약간 더 걸릴 수 있다.(systemd가 서비스를 새로 구동하는 데 시간이 소요되기 때문)
* 소켓과 관련된 스크립트 파일은 `/lib/systemd/system/디렉터리에 '소켓이름.socket'` 이라는 파일로 존재한다.

