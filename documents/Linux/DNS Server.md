# DNS Server

> URL을 IP주소로 변환시켜주는 서버인 DNS에 대하여 알아본다.

<br>

### 네임 서버의 개념

네임 서버는 **Domain Name System** 서버라고 하며, 우리가 웹 브라우저나 FTP 클라이언트를 사용할 때 http://www.naver.com 또는 ftp://mirrors.kernel.org/ 등과 같은 URL을 사용한다. 실제 원하는 서버에 접근하려면 이 URL을 해당 컴퓨터의 IP주소로 변환시켜야 하는데, 바로 이 일을 네임 서버 또는 DNS 서버라는 컴퓨터가 담당한다.

URL 을 입력했을 때 IP주소를 획득하는 과정은 아래 그림과 같다.

![DNS1](../img/Linux/DNS1.PNG)

<br>

<br>

### 네임 서버의 구축

네임 서버를 구축해서 운영하는 방법을 살펴본다.

<br>

#### 도메인 이름 체계

네트워크에 연결된 컴퓨터를 구분하는 유일한 방법은 IP주소다. 따라서 웹 브라우저로 웹 서버에 접속하려면 120.50.132.112 등과 같은 IP 주소를 알아야 한다. 

이러한 IP 주소는 외우기 너무 어려우므로, 각 컴퓨터의 IP 주소에 외우기 쉬운 이름을 부여하면 된다.

인터넷 초창기에는 전 세계의 인터넷에 연결된 컴퓨터가 그렇게 많이 않았으므로, 1대의 네임 서버만으로도 IP 주소와 이름을 충분히 관리할 수 있었다. 하지만 인터넷이 폭발적으로 확장되면서 인터넷에 연결된 컴퓨터는 기하급수적으로 늘어나게 되었고, 몇 대의 네임 서버로는 실시간으로 생겼다 없어지는 인터넷상의 컴퓨터를 도저히 관리할 수 없게 되었다.

그래서 아래 그림과 같은 트리 구조 형태의 도메인 이름 체계가 고안되었다. 음영이 들어간 사각형을 네임 서버로 생각한다. 또, 음영이 없는 사각형을 실제로 운영되는 컴퓨터로 보면 된다. 즉, ROOT(.) 네임 서버는 1단계 네임 서버인 com 네임 서버, net 네임 서버, org 네임 서버, edu 네임 서버 등과 국가 도메인인 kr, fr, sp 등을 관리한다. 또 1단계 네임 서버는 자신의 하위에 있는 2단계 네임 서버를 관리하면 된다.

![DNS2](../img/Linux/DNS2.PNG)

<br>

#### 로컬 네임 서버가 작동하는 순서

리눅스에는 각자 사용하는 네임 서버가 `/etc/resolv.conf` 파일에 `nameserver IP 주소` 형식으로 설정되어 있다. 이 네임 서버를 로컬 네임 서버라고 부른다. 그래서 www.naver.com 의 IP 주소를 요구하면 이 로컬 네임 서버에 질문을 하는 것이다.

그런데 로컬 네임 서버는 의외로 아는 것이 별로 없다. 로컬 네임 서버가 혼자서 전 세계의 모든 컴퓨터의 도메인 이름을 관리할 수 없기 때문이다. 따라서 로컬 네임 서버는 자신이 아는 도메인 이름이라면 바로 알려주지만, 자신이 모를 경우에는 다음과 같은 작업을 수행한다.