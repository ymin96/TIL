# IPv6

> IPv6의 특징에 대하여 알아본다.

<br>

### 개요

현재 우리가 사용하고 있는 인터넷 주소 방식인 IP version 4는 그 사용자가 기하급수적으로 늘어나고, 또 네트워킹을 사용하는 장비가 늘어나서 포화상태이다. 현재까지 이 문제를 자체적으로 해결하기 위해 IPv4에서는 NAT를 비롯한 다양한 솔루션을 사용했지만, 점점 더 복잡해지는 구성 방법과 End to End 지원이라는 문제가 있는 상태였다.

따라서 기존 IPv4를 대체하면서도 훨씬 더 개선된 새로운 IP 방식이 필요하게 되었는데 그게 바로 IP version 6 이다.

<br>

### IPv6의 특징

#### 주소 범위

IPv4는 32비트 체계였고, 이론상 가능한 주소는 43억 개 정도이다. 하지만 IPv6은 128비트 체계이고, 가능한 주소는 3.4 * 10^36개 정도이다. 따라서 이론적으로 생각했을때 거의 무제한으로 사용 가능하다.

<br>

#### Global Reachability

Global Reachability란 전 세계의 네트워크 어디에서나 주소를 변경하지 않고, 즉 고유의 주소를 가지고 접속이 가능하다는 걸 뜻한다. IPv6의 넓은 주소공간은 점점 늘어나는 네트워크 지원 장비들 모두에게 충분한 IP 주소를 제공해줄 수 있기 때문에 전 세계 어디에 있더라도 한쪽 끝에서 다른 쪽 끝까지 주소 변환 없이 자기 자신이 주소를 가지고 접속 가능한 End-to-End Reachability를 지원한다. 따라서 어플리케이션적인 측면이나 보안적인 측면에서 훨씬 더 효과적이 되었다.

<br>

#### Address Hierarchy

IPv6은 계층화된 주소 배정이 가능하다. 예를 들어 128비트의 IPv6 주소를 가지고 처음 16비트까지는 상용 주소를 구분하고, 17비트부터 23비트까지는 대륙을 구분하고, 23비트부터 32비트까지는 그 대륙에 있는 ISP들을 구분하고, 또 32비트부터 48비트까지는 하나의 사이트, 회사, 학교 같은것을 구분하고, 48비트부터 64비트까지를 이용해서 각 LAN을 구분하는 것이다.

이러한 계층적 관리 기법으로 인해 효과적인 주소 배치가 가능하고 여러 개의 네트워크를 하나의 네트워크로 묶어 트래픽을 줄일 수 있다.

<br>

#### Aggregation

앞에서 설명한 계층적인 주소 배정이 가능해짐에 따라 여러 개의 네트워크 주소를 묶어주는게 가능해졌다. 

![1](../img/Network/IPv6/1.PNG)

고객사이트#1을 보자

고객사이트#1에는 두 개의 네트워크가 있다고 가정한다. 하나는 2001:0200:0001:0001::/64 이고 또 하나는 2001:0200:0001:0002::/64 이다.

두 개의 주소를 보면 앞에서부터 3번째 콜론까진 똑같고 4번째 묶음이 0001, 0002로 다르다. 즉 서로 다른 2개의 네트워크가 있다.

하지만 이 두 개의 네트워크가 밖으로 나갈 땐 하나로 묶어서 내보낼 수 있다는 것이다. 즉 2001:0200:0001::/48로 보낼 수 있다.

뒤에 붙는 /64나 /48같은 수는 바로 IPv4에서의 서브넷 마스크 비트랑 비슷하다. 즉 /48이란 맨 앞에서 48비트까지가 같은 네트워크라는 뜻이다. 

다시 그림을 보면 고객사이트#2 역시 같은 개념으로 묶을 수 있는 것을 알 수 있다. 2001:0200으로 시작하는 네트워크를 다 모아주면 하나의 네트워크가 되는 것이다. 그림에 있는 ISP가 바로 그런 네트워크다.

이 개념이 바로 Aggregation이다.

이처럼 Prefix Aggregation(네트워크의 앞부분을 묶는 방식)을 해주는 이유는 경로 정보 여러 개를 하나로 묶어줌으로써 라우팅 테이블을 줄일 수 있고, 이렇게 라우팅 테이블을 줄여 라우터의 메모리 절약은 물론이고 라우팅을 훨씬 더 효과적이고 빠르게 진행할 수 있기 때문이다.

